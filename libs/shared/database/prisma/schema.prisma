datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        String   @id @default(cuid())
  name      String
  email     String   @unique
  password  String
  role      Role     @default(ORG_USER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ðŸ‘‡ Regular membership in an organization
  organizationId String?
  organization   Organization? @relation("OrgMembers", fields: [organizationId], references: [id])

  // ðŸ‘‡ Admin of an organization
  adminOfOrg Organization? @relation("OrgAdmin")
}

model Organization {
  id            String   @id @default(cuid())
  name          String
  type          OrgType  @default(ORGANIZATION)
  email         String?
  contactNumber String?
  website       String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  // ðŸ‘‡ Admin relationship (1:1)
  adminId String? @unique
  admin   User?   @relation("OrgAdmin", fields: [adminId], references: [id])

  // ðŸ‘‡ Regular users (1:N)
  users User[] @relation("OrgMembers")
}

// ==================
//  ORGANIZATION TYPE
// ==================
enum OrgType {
  ORGANIZATION
  JOB_PROVIDER
}

// ==================
//  ROLES
// ==================
enum Role {
  SUPER_ADMIN // platform owner
  ADMIN_EMPLOYEE // works for admin
  ORG_ADMIN // organization / job provider admin
  ORG_USER // student or employee
}
