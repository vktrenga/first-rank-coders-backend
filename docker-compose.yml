## Docker Compose for First Rank Coders backend
##
## Helpful commands (PowerShell):
##  - Build images only:
##      docker-compose build
##
##  - Build and start all services in foreground:
##      docker-compose up --build
##
##  - Build and start in background (detached):
##      docker-compose up --build -d
##
##  - Stop and remove containers created by compose:
##      docker-compose down
##
## Notes:
##  - Compose builds from the repository root. If you add a lockfile (package-lock.json)
##    Dockerfiles can be adjusted to use `npm ci` for reproducible installs.
##  - To enable fast local development, consider a docker-compose.override.yml that
##    mounts service source dirs and runs `npm run start:dev` inside containers.

version: '3.8'

services:
  auth:
    build:
      context: .
      dockerfile: services/auth/Dockerfile
    container_name: frc_auth
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
    restart: unless-stopped

  user:
    build:
      context: .
      dockerfile: services/user/Dockerfile
    container_name: frc_user
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
    restart: unless-stopped

  contest:
    build:
      context: .
      dockerfile: services/contest/Dockerfile
    container_name: frc_contest
    ports:
      - "3003:3003"
    environment:
      - PORT=3003
    restart: unless-stopped

networks:
  default:
    driver: bridge
